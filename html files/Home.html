<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <link rel="stylesheet" href="/css files/Home.css" type="text/css">
  <script src="https://www.gstatic.com/firebasejs/9.8.4/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.8.4/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.8.4/firebase-auth-compat.js"></script> 
  <script src="https://www.gstatic.com/firebasejs/9.8.4/firebase-database-compat.js"></script>
  <title>Home Page</title>
</head>

<body>

<div class="topnav">
        <a class="nav-link" href="https://sankeysolutions.com/#/innovation-lab"><b><u>Sankey Solutions</b></u> <span class="sr-only">(current)</span></a>
        <a class="nav-link" href="SignIn.html">Logout</a>
        <a class="nav-link" href="https://sankeysolutions.com/#/innovation-lab">About</a>
      </div>
      <br><br><br>

<p > This is where all the existing users will be shown </p>
<input type="submit" id='exUsers' name="exUsers" value="Click here to list existing users " onclick={getdata()} />  

<div class="col-md-6">
  <table class="table table-striped" id='dataTbl'>
    <thead>
      <tr>
        <th scope="col">#</th>
        <th scope="col">Email id</th>
        <th scope="col">User type</th>
        <th scope="col">User ID</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>1</td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>2</td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>3</td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  </div>

  <script src="../js files/home.js" ></script>
</body>

</html>
<!-- <script>

  // Import the functions you need from the SDKs you need
import { initializeApp } from "firebase/app";
// import { getAnalytics } from "firebase/analytics";
import {getDatabase, ref} from "firebase/database";
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyBZ9JDWOoVtV7Hugq1MU9j7e2-9L83SIPY",
  authDomain: "sankey-website-trial.firebaseapp.com",
  databaseURL: "https://sankey-website-trial-default-rtdb.firebaseio.com",
  projectId: "sankey-website-trial",
  storageBucket: "sankey-website-trial.appspot.com",
  messagingSenderId: "337574551004",
  appId: "1:337574551004:web:8063cc5707d03bb4bb4319",
  measurementId: "G-YCP2F97K1J"
};

// Initialize Firebase
// const app = initializeApp(firebaseConfig);
// const analytics = getAnalytics(app);
// const database = getDatabase();
// const reference = ref(db, 'user/')
const auth = initializeApp.auth();


function exUsers() {
    
    // var rowNum = 0;

    const email = document.getElementById("email");
    const usertype = document.getElementById("usertype");
    //Declared user variable
    var user = auth.currentUser
                
    //Adding this user to realtime database
    var database_ref = database.ref()

    //creating user object which will contain all users data 
    var user_data = {
      email : email,
      usertype : usertype,
      last_login : Date.now()
    }
    
    database_ref.child('user/' + user.uid).set(user_data)
    $('#dataTbl td').remove();

    alert("click ok this exUsers function is created ");
    var ref = firebaseApp.database_ref.user_data

    ref.on('value', (snapshot) => {
      snapshot.forEach((childSnapshot) => {
        var childKey = childSnapshot.key;
        var childData = childSnapshot.val();
        // ...
        console.log(childKey,childData);

        rowNum += 1 ;
        var row = "<tr><td>" + rowNum + "</td><td>" + childData.email+ "</td><td>" + childData.last_login + "</td><td>" + childData.usertype + "</td></tr>"
        $(row).appendTo('#dataTbl');
        
      });
    });
    
      // const email = document.getElementById("email").value;
      // firebase.database().ref("user/" + user.uid).on('value', function(snapshot){
      //      snapshot.forEach(function (get_email_and_usertype){
      //       email_data = get_email_and_usertype.val();
      //       user = get_email_and_usertype.key;
      //       email = email_data["email"];
      //       usertype = email_data["usertype"];
            
      //       console.log("emailid "+ user , "usertype" + usertype);

      //      });
      // });
}
</script> -->